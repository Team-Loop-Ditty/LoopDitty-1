<html>
<head>
    <script src="ggslac/jslibs/d3.v3.min.js"></script>
    <script src="ggslac/jslibs/gl-matrix-min.js"></script>
    <script src="ggslac/jslibs/webgl-utils.js"></script>
    <script src="ggslac/jslibs/dat.gui.min.js"></script>
    <script src="ggslac/jslibs/jquery-3.5.1.min.js"></script>

    <script src="ggslac/geometry/polymesh.js"></script>
    <script src="ggslac/geometry/basicmesh.js"></script>
    <script src="ggslac/geometry/primitives3d.js"></script>
    <script src="ggslac/geometry/cameras3d.js"></script>
    <script src="ggslac/shaders/shaders.js"></script>
    <script src="ggslac/utils/simpledraw.js"></script>
    <script src="ggslac/viewers/basecanvas.js"></script>

    <script src = "jslibs/numeric-1.2.6.min.js"></script>

    <script src="progressbar.js"></script>
    <script src="matrixutils.js"></script>
    <script src="audioobj.js"></script>
    <script src="loopdittycanvas.js"></script>
    <link rel="stylesheet" href="ditty.css">
    </head>
<body>

<h1>LoopDitty Prototype</h1>



<HR>
    <Ul>
        <li>Load in a JSON file generated by JSONFeatures.py</li>
        <li>Click Play/Pause to Play/Pause the audio.  The selected GUI element will be in sync with the audio</li>
    </Ul>
<table>
<tr><td><h3>File Input</h3></td><td><input type = "file" id = "fileInput"></td><td colspan = "2"></td></tr>
</table>

<table>
<tr>
    <td><audio id="audioWidget" controls></audio></td>
</tr>
<tr>
    <td>
        <canvas id="MainGLCanvas" style="border: none;" width="800" height="600"></canvas>
    </td>
</tr>

<tr><td></td>
    <h3><p id = "pagestatus"><font color = "yellow">Waiting for user input...</font></p></h3>
</td></tr>
</table>

<script>
    let progressBar = new ProgressBar(document.getElementById("pagestatus"));
    let audioObj = new AudioObj(document.getElementById("audioWidget"), progressBar);
    let glcanvas = document.getElementById("MainGLCanvas");
    glcanvas.addEventListener("contextmenu", function(e){ e.stopPropagation(); e.preventDefault(); return false; }); //Need this to disable the menu that pops up on right clicking
    let fileInput = document.getElementById('fileInput');
    let canvas = new LoopDittyCanvas(audioObj, progressBar, fileInput, glcanvas);
    canvas.loadPrecomputedSong("PythonFeatures/MJ.json");
</script>

</body>
</html>
